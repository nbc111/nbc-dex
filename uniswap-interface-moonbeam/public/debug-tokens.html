<!DOCTYPE html>
<html>
<head>
    <title>Debug Token Loading</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #0d1117;
            color: #c9d1d9;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 { color: #58a6ff; }
        h2 { color: #79c0ff; margin-top: 30px; }
        .info { background: #161b22; padding: 15px; border-radius: 6px; margin: 10px 0; }
        .success { color: #3fb950; }
        .error { color: #f85149; }
        .warning { color: #d29922; }
        pre { background: #0d1117; padding: 10px; border: 1px solid #30363d; border-radius: 6px; overflow-x: auto; }
        button {
            background: #238636;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #2ea043; }
    </style>
</head>
<body>
    <h1>ğŸ” Token Loading Debugger</h1>
    
    <div class="info">
        <p>è¿™ä¸ªé¡µé¢ä¼šå¸®åŠ©ä½ è¯Šæ–­ä¸ºä»€ä¹ˆä»£å¸æ²¡æœ‰æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šã€‚</p>
        <p>è¯·åœ¨ Uniswap DEX é¡µé¢æ‰“å¼€åï¼Œåœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œä»¥ä¸‹ä»£ç ï¼š</p>
    </div>

    <h2>ğŸ“‹ æ­¥éª¤ 1: æ£€æŸ¥å½“å‰é“¾ ID</h2>
    <pre>
// å¤åˆ¶å¹¶ç²˜è´´åˆ° Uniswap DEX é¡µé¢çš„æ§åˆ¶å°
console.log('ğŸ”— Current Chain ID:', window.ethereum?.chainId);
console.log('ğŸ”— Chain ID (decimal):', parseInt(window.ethereum?.chainId, 16));
    </pre>

    <h2>ğŸ“‹ æ­¥éª¤ 2: æ£€æŸ¥ Redux Store ä¸­çš„ä»£å¸åˆ—è¡¨</h2>
    <pre>
// è·å– Redux store
const state = window.__REDUX_DEVTOOLS_EXTENSION__?.() || 
              JSON.parse(localStorage.getItem('persist:root') || '{}');

console.log('ğŸ“¦ Redux State:', state);

// æ£€æŸ¥ä»£å¸åˆ—è¡¨
if (state.lists) {
    console.log('ğŸ“œ Token Lists:', state.lists);
    
    // æ£€æŸ¥é€‰ä¸­çš„åˆ—è¡¨
    const selectedUrl = state.lists.selectedListUrl;
    console.log('âœ… Selected List URL:', selectedUrl);
    
    // æ£€æŸ¥åˆ—è¡¨ä¸­çš„ä»£å¸
    if (state.lists.byUrl) {
        Object.keys(state.lists.byUrl).forEach(url => {
            const list = state.lists.byUrl[url];
            if (list.current) {
                console.log(`ğŸ“‹ List: ${url}`);
                console.log(`  - Name: ${list.current.name}`);
                console.log(`  - Total tokens: ${list.current.tokens.length}`);
                
                // ç»Ÿè®¡æ¯ä¸ªé“¾çš„ä»£å¸æ•°é‡
                const chainCounts = {};
                list.current.tokens.forEach(token => {
                    chainCounts[token.chainId] = (chainCounts[token.chainId] || 0) + 1;
                });
                console.log('  - Tokens by chain:', chainCounts);
                
                // æ˜¾ç¤º Chain 1281 çš„ä»£å¸
                const chain1281Tokens = list.current.tokens.filter(t => t.chainId === 1281);
                console.log(`  - Chain 1281 (NBC) tokens (${chain1281Tokens.length}):`, 
                    chain1281Tokens.map(t => t.symbol).join(', '));
            }
        });
    }
}
    </pre>

    <h2>ğŸ“‹ æ­¥éª¤ 3: æ£€æŸ¥ SUGGESTED_BASES</h2>
    <pre>
// è¿™ä¸ªéœ€è¦åœ¨ React DevTools æˆ–é€šè¿‡ window å¯¹è±¡è®¿é—®
// å¦‚æœä½ å®‰è£…äº† React DevToolsï¼Œå¯ä»¥æ£€æŸ¥ CommonBases ç»„ä»¶çš„ props

// æˆ–è€…ç›´æ¥æ£€æŸ¥ constants
fetch('/static/js/main.chunk.js')
    .then(r => r.text())
    .then(code => {
        console.log('ğŸ” Searching for SUGGESTED_BASES in code...');
        if (code.includes('SUGGESTED_BASES')) {
            console.log('âœ… SUGGESTED_BASES found in code');
        } else {
            console.log('âŒ SUGGESTED_BASES not found');
        }
    });
    </pre>

    <h2>ğŸ“‹ æ­¥éª¤ 4: æ‰‹åŠ¨æµ‹è¯•ä»£å¸åŠ è½½</h2>
    <pre>
// æ£€æŸ¥ tokens.json æ˜¯å¦å¯ä»¥è®¿é—®
fetch('/tokens.json')
    .then(r => r.json())
    .then(data => {
        console.log('âœ… tokens.json loaded successfully');
        console.log('ğŸ“Š Total tokens:', data.tokens.length);
        
        const chain1281 = data.tokens.filter(t => t.chainId === 1281);
        console.log('ğŸ“Š Chain 1281 tokens:', chain1281.length);
        console.log('ğŸ“‹ Chain 1281 token symbols:', 
            chain1281.map(t => t.symbol).join(', '));
        
        // æ˜¾ç¤ºå‰5ä¸ª Chain 1281 ä»£å¸çš„è¯¦ç»†ä¿¡æ¯
        console.log('ğŸ“‹ First 5 Chain 1281 tokens:');
        chain1281.slice(0, 5).forEach(t => {
            console.log(`  - ${t.symbol}: ${t.name} (${t.address})`);
        });
    })
    .catch(err => {
        console.error('âŒ Failed to load tokens.json:', err);
    });
    </pre>

    <h2>ğŸ“‹ æ­¥éª¤ 5: æ£€æŸ¥é’±åŒ…è¿æ¥</h2>
    <pre>
// æ£€æŸ¥é’±åŒ…æ˜¯å¦è¿æ¥åˆ°æ­£ç¡®çš„ç½‘ç»œ
if (window.ethereum) {
    window.ethereum.request({ method: 'eth_chainId' })
        .then(chainId => {
            const decimal = parseInt(chainId, 16);
            console.log('ğŸ”— Wallet Chain ID:', chainId, '(decimal:', decimal, ')');
            
            if (decimal === 1281) {
                console.log('âœ… Connected to NBC chain (1281)');
            } else {
                console.log('âš ï¸  NOT connected to NBC chain!');
                console.log('ğŸ’¡ Please switch to NBC network in your wallet');
            }
        });
    
    // æ£€æŸ¥è´¦æˆ·
    window.ethereum.request({ method: 'eth_accounts' })
        .then(accounts => {
            if (accounts.length > 0) {
                console.log('âœ… Wallet connected:', accounts[0]);
            } else {
                console.log('âš ï¸  No wallet connected');
            }
        });
} else {
    console.log('âŒ No Ethereum wallet detected');
}
    </pre>

    <h2>ğŸ¯ é¢„æœŸç»“æœ</h2>
    <div class="info">
        <p><strong>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š</strong></p>
        <ul>
            <li>âœ… Chain ID: 1281 (NBC)</li>
            <li>âœ… tokens.json åŒ…å« 12 ä¸ª Chain 1281 çš„ä»£å¸</li>
            <li>âœ… Redux store ä¸­æœ‰è¿™äº›ä»£å¸</li>
            <li>âœ… é’±åŒ…è¿æ¥åˆ° Chain 1281</li>
        </ul>
        
        <p><strong>å¦‚æœçœ‹åˆ°é—®é¢˜ï¼š</strong></p>
        <ul>
            <li>âŒ Chain ID ä¸æ˜¯ 1281 â†’ éœ€è¦åœ¨é’±åŒ…ä¸­åˆ‡æ¢ç½‘ç»œ</li>
            <li>âŒ Redux store ä¸­æ²¡æœ‰ä»£å¸ â†’ éœ€è¦æ¸…é™¤ç¼“å­˜å¹¶é‡æ–°åŠ è½½</li>
            <li>âŒ tokens.json åŠ è½½å¤±è´¥ â†’ æ£€æŸ¥æ–‡ä»¶è·¯å¾„å’Œæ ¼å¼</li>
        </ul>
    </div>

    <h2>ğŸ”§ å¿«é€Ÿä¿®å¤</h2>
    <button onclick="clearAll()">æ¸…é™¤æ‰€æœ‰ç¼“å­˜</button>
    <button onclick="reloadPage()">é‡æ–°åŠ è½½é¡µé¢</button>
    
    <div id="result"></div>

    <script>
        function clearAll() {
            localStorage.clear();
            sessionStorage.clear();
            document.getElementById('result').innerHTML = '<p class="success">âœ… ç¼“å­˜å·²æ¸…é™¤ï¼è¯·é‡æ–°åŠ è½½é¡µé¢ã€‚</p>';
        }
        
        function reloadPage() {
            window.location.href = 'http://localhost:3001';
        }
    </script>
</body>
</html>
